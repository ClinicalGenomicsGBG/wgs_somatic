Bootstrap: docker

# The build-stage image:
From: continuumio/miniconda3:24.4.0-0

%files
	/home/xberfa/scripts/build_sing/samtools-1.20.yml /dependencies/samtools-1.20.yml
    /apps/bio/dependencies/wgs_somatic/hg38/sentieon/GCA_000001405.15_GRCh38_no_alt_analysis_set.fna /references/GCA_000001405.15_GRCh38_no_alt_analysis_set.fna
    /apps/bio/dependencies/wgs_somatic/hg38/sentieon/GCA_000001405.15_GRCh38_no_alt_analysis_set.fna.fai /references/GCA_000001405.15_GRCh38_no_alt_analysis_set.fna.fai

%environment
    export PATH="/opt/conda/bin:$PATH"
    export PATH="/opt/conda/envs/$(head -1 /dependencies/samtools-1.20.yml | cut -d' ' -f2)/bin:$PATH"

%post
    /opt/conda/bin/conda env create -f /dependencies/samtools-1.20.yml

%runscript
    exec /opt/conda/envs/$(head -n 1 /dependencies/samtools-1.20.yml | cut -f 2 -d ' ')/bin/"$@"

%labels
    Author Fanny Berglund
    Version 1.0.0
